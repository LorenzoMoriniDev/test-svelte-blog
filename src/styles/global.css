/* src/styles/global.css */

/* --- 1. VARIABLES & BASE STYLES --- */
:root {
  --color-primary: #0d5d5b;
  --color-accent: #158481;
  --color-text-primary: #212529;
  --color-text-secondary: #6c757d;
  --color-background: #ffffff;
  --color-bg-section: #f8f9fa;
  --color-border: #dee2e6;
  --header-height: 85px; 
}

/* Reset & Global Font */
body, h1, h2, h3, p, ul, li, a, button {
  margin: 0; padding: 0;
  font-family: 'Lato', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  line-height: 1.7; box-sizing: border-box;
}

body {
  background-color: var(--color-background); color: var(--color-text-primary);
  font-size: 16px; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
  padding-top: 0;
}

/* --- 1a. SCROLLBAR HANDLING --- */
@media (pointer: fine) {
  html {
    overflow-y: scroll;
  }
}
*{scrollbar-width:thin;scrollbar-color:var(--color-primary)transparent}
::-webkit-scrollbar{width:12px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--color-primary);border-radius:20px;border:3pxsolidtransparent}
::-webkit-scrollbar-thumb:hover{background:var(--color-accent)}

/* --- 2. LAYOUT & CONTAINERS --- */
.container { max-width: 1100px; margin: 0 auto; padding: 0 1.5rem; }
section { padding: 5rem 0; border-bottom: 1px solid var(--color-border); }
section:last-of-type { border-bottom: none; }
.bg-light { background-color: var(--color-bg-section); }

/* --- 3. TYPOGRAPHY --- */
h1, h2, h3 { font-weight: 700; line-height: 1.3; }
h2 { font-size: 2.25rem; margin-bottom: 1rem; text-align: center; color: var(--color-primary); }
.section-subtitle { text-align: center; font-size: 1.1rem; color: var(--color-text-secondary); max-width: 600px; margin: 0 auto 3.5rem auto; }
h3 { font-size: 1.3rem; color: var(--color-text-primary); margin-bottom: 1.5rem; }
p { margin-bottom: 1rem; }
a { color: var(--color-primary); text-decoration: none; transition: color 0.3s ease; }
a:hover { color: var(--color-accent); }

/* --- 4. HEADER & MOBILE-FIRST NAVIGATION --- */
header {
  background-color: var(--color-background);
  border-bottom: 1px solid var(--color-border);
  position: sticky; top: 0; z-index: 1000; width: 100%;
}
.header-container {
  display: flex; justify-content: space-between; align-items: center;
  padding: 1rem 2rem; max-width: 1200px; margin: 0 auto;
}
.logo { font-weight: bold; font-size: 1.5rem; color: var(--color-text-primary); text-decoration: none; position: relative; z-index: 1001; }
.cta-button {
  background-color: var(--color-primary); color: white !important; border: none;
  padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer;
  font-weight: bold; text-decoration: none; transition: background-color 0.3s ease;
  border-bottom: none !important;
}
.cta-button:hover { background-color: var(--color-accent); border-bottom-color: transparent !important; }

/* STILI MOBILE DI DEFAULT */
.hamburger-menu {
  display: flex;
  flex-direction: column; justify-content: space-around;
  width: 2rem; height: 2rem; background: transparent; border: none;
  cursor: pointer; padding: 0; position: relative; z-index: 1001;
}
.hamburger-line {
  width: 2rem; height: 3px; background-color: var(--color-text-primary);
  border-radius: 10px; transition: all 0.3s linear;
}

header nav {
  /* Stile OVERLAY di default */
  position: fixed; top: 0; left: 0;
  width: 100%; height: 100%;
  background-color: rgba(248, 249, 250, 0.95);
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  display: flex; flex-direction: column;
  justify-content: center; align-items: center;
  gap: 2.5rem;
  opacity: 0; visibility: hidden; /* NASCOSTO DI DEFAULT */
  /* 
    >>> CHANGE #1 of 2: The 'transition' property has been REMOVED from the base rule.
    This is the key change that prevents the menu from briefly appearing when you resize 
    the window from desktop to mobile, as it no longer tries to animate the opacity change.
  */
  z-index: 1000;
}
header nav.is-open {
  opacity: 1; visibility: visible;
}
header nav a {
  font-size: 1.5rem;
}

/* Animazione "X" per l'hamburger */
.hamburger-menu[aria-expanded="true"] .hamburger-line:nth-child(1) { transform: rotate(45deg) translate(8px, 8px); }
.hamburger-menu[aria-expanded="true"] .hamburger-line:nth-child(2) { opacity: 0; }
.hamburger-menu[aria-expanded="true"] .hamburger-line:nth-child(3) { transform: rotate(-45deg) translate(7px, -7px); }

/* --- 4a. DESKTOP NAVIGATION STYLES --- */
@media (min-width: 993px) {
  .hamburger-menu {
    display: none;
  }

  header nav {
    position: static;
    width: auto; height: auto;
    background-color: transparent;
    backdrop-filter: none;
    flex-direction: row;
    justify-content: flex-end;
    gap: 2rem;
    opacity: 1; visibility: visible;
    transition: none; /* Explicitly remove any transition on desktop */
  }
  header nav a {
    font-size: 1rem;
    font-weight: 700;
    padding-bottom: 5px;
    border-bottom: 2px solid transparent;
    transition: color 0.3s ease, border-bottom-color 0.3s ease;
  }
  header nav a:hover {
    color: var(--color-primary);
    border-bottom-color: var(--color-primary);
  }
}

/* 
  >>> CHANGE #2 of 2: A new media query is added for screens BELOW the desktop breakpoint.
  This block applies the smooth transition ONLY on viewports where the hamburger menu 
  is present. This makes the animation smoother and ensures it doesn't interfere with
  the desktop styles during a resize. I've used a cubic-bezier function for a more
  professional feel.
*/
@media (max-width: 992px) {
  header nav {
    transition: opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  }
}


/* --- 5. HERO SECTION (FIXED Z-INDEX & LAYOUT) --- */
.hero-container {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 90vh;
  padding: 4rem 1.5rem;
  overflow: hidden;
  text-align: center;
  border-bottom: 1px solid var(--color-border);
}

.hero-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1; /* Livello più basso */
}

.hero-video {
  width: 100%;
  height: 100%;
  /* METODO CORRETTO: Forza il video a coprire l'area senza distorcerlo */
  object-fit: cover; 
  filter: blur(4px);
  transform: scale(1.05);
}

.hero-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(10, 20, 20, 0.35);
}

.hero-content {
  position: relative;
  z-index: 2; /* Livello più alto, sopra il background */
  max-width: 800px;
}

.hero-content h1 {
  font-size: 2.8rem;
  color: #ffffff;
  margin-bottom: 1.5rem;
  font-weight: 700;
  text-shadow: 0 2px 10px rgba(0,0,0,0.5);
}

.hero-subtitle {
  font-size: 1.2rem;
  color: #e9ecef;
  line-height: 1.8;
  text-shadow: 0 1px 5px rgba(0,0,0,0.5);
}

@media (max-width: 768px) {
  .hero-content h1 { font-size: 2.2rem; }
  .hero-subtitle { font-size: 1.1rem; }
}

/* --- 6. CONTENT CARDS (FOR PATHOLOGIES & TREATMENTS) --- */
.content-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
.card { background-color: var(--color-background); border: 1px solid var(--color-border); border-radius: 8px; padding: 2rem; transition: box-shadow 0.3s ease, transform 0.3s ease; }
.card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.07); }
.card ul { list-style-type: none; padding: 0; }
.card li { position: relative; padding-left: 25px; margin-bottom: 0.75rem; color: var(--color-text-secondary); }
.card li:last-child { margin-bottom: 0; }
.card li::before { content: '✓'; position: absolute; left: 0; top: 1px; color: var(--color-primary); font-weight: bold; }

/* --- 7. CONTACT SECTION --- */
.contact-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; align-items: flex-start; margin-top: 2rem; }
.contact-details h3 { border-bottom: 2px solid var(--color-primary); padding-bottom: 0.5rem; display: inline-block; margin-bottom: 2rem; }
.contact-details p { font-size: 1.1rem; margin-bottom: 1.5rem; }
.contact-details p strong { color: var(--color-text-primary); display: block; font-weight: 700; margin-bottom: 0.25rem; }
.contact-details p span, .contact-details p a { color: var(--color-text-secondary); }
.map-placeholder { width: 100%; height: 400px; background-color: #e9ecef; border: 1px solid var(--color-border); border-radius: 8px; display: flex; justify-content: center; align-items: center; color: var(--color-text-secondary); }
@media (max-width: 768px) { .contact-layout { grid-template-columns: 1fr; } }

/* --- 8. FOOTER --- */
footer { background-color: #212529; color: #ced4da; padding: 3rem 1.5rem; border-top: 1px solid var(--color-border); }
.footer-content { max-width: 800px; margin: 0 auto; text-align: center; }
.footer-contact p { margin-bottom: 0.75rem; }
.footer-contact strong { color: #f8f9fa; }
footer a { color: #f8f9fa; text-decoration: none; }
footer a:hover { text-decoration: underline; }
footer hr { border: 0; border-top: 1px solid #495057; margin: 2rem auto; width: 50%; }
.footer-social { margin-bottom: 1rem; }
.footer-legal { font-size: 0.9rem; color: var(--color-text-secondary); }
.footer-legal a { color: var(--color-text-secondary); margin: 0 0.5rem; }
.footer-legal a:hover { color: #f8f9fa; }
.footer-legal p { margin-top: 1rem; }

/* --- 9. UTILITY CLASSES --- */
.no-scroll { overflow: hidden; }

/* SOSTITUISCI QUESTA SEZIONE INTERA */
/* --- 10. ABOUT ME SECTION --- */
.about-layout {
  display: grid;
  grid-template-columns: 1fr 2fr;
  align-items: center;
  gap: 3rem;
  margin-top: 3rem;
}

.about-image-container {
  width: 100%;
  max-width: 400px;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

.about-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.about-content h3 {
  color: var(--color-primary);
  margin-bottom: 1rem;
}

@media (max-width: 768px) {
  .about-layout {
    grid-template-columns: 1fr;
    gap: 2rem;
  }
}

/* --- 11. TESTIMONIALS SECTION --- */
.testimonials-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
  gap: 2.5rem;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
}

.testimonial-card {
  background-color: var(--color-background);
  border: 1px solid var(--color-border);
  border-left: 5px solid var(--color-primary);
  border-radius: 8px;
  padding: 2rem;
  margin: 0;
  display: flex;
  flex-direction: column;
}

.testimonial-card blockquote {
  flex-grow: 1;
  position: relative;
  padding-left: 1.5rem;
  margin: 0; /* CAMBIATO */
}

.testimonial-card blockquote::before {
  content: '“';
  position: absolute;
  left: -0.5rem;
  top: -1.5rem;
  font-size: 4rem;
  color: var(--color-primary);
  opacity: 0.2;
}

.testimonial-card blockquote p {
  font-style: italic;
  color: var(--color-text-secondary);
  margin-bottom: 0; /* CAMBIATO */
}

.testimonial-card figcaption {
  margin-top: 1.5rem;
  text-align: right;
  font-weight: bold;
  color: var(--color-text-primary);
}

/* --- 12. BACKGROUND IMAGE SECTIONS (FIXED) --- */
.section-with-bg {
  position: relative;
  overflow: hidden;
}

.section-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  background-position: center center;
  background-size: cover;
  background-attachment: fixed;
  /* La magia avviene qui: usa la variabile passata dal componente */
  background-image: var(--bg-image);
}

.section-overlay {
  width: 100%;
  height: 100%;
  background-color: rgba(10, 20, 20, 0.6);
}

.section-with-bg .container {
  position: relative;
  z-index: 2;
}

.section-with-bg h2,
.section-with-bg .section-subtitle {
  color: #ffffff;
  text-shadow: 0 1px 3px rgba(0,0,0,0.4);
}

/* --- 13. BLOG LISTING PAGE --- */
#blog-listing {
  background-color: var(--color-background); /* Sfondo bianco per pulizia */
  min-height: 80vh; /* Assicura che la pagina abbia un'altezza minima */
}

.posts-grid {
  display: grid;
  grid-template-columns: 1fr; /* Una colonna di default per mobile */
  gap: 1.5rem;
  max-width: 800px; /* Limita la larghezza per la leggibilità */
  margin: 0 auto;
}

.post-card {
  display: block;
  text-decoration: none;
  background-color: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 1.5rem 2rem;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.post-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.07);
}

.post-card h3 {
  color: var(--color-primary);
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}

.post-card .post-date {
  color: var(--color-text-secondary);
  font-size: 0.9rem;
  margin: 0;
}

/* --- 14. SINGLE POST PAGE --- */
#post-content {
  background-color: var(--color-background);
  padding: 4rem 0;
}

.post-container {
  max-width: 750px; /* Larghezza ottimale per la lettura */
  margin-left: auto;
  margin-right: auto;
}

.post-header {
  text-align: center;
  margin-bottom: 3rem;
  border-bottom: 1px solid var(--color-border);
  padding-bottom: 2rem;
}

.post-header h1 {
  font-size: 2.8rem;
  color: var(--color-primary);
  line-height: 1.2;
}

.post-header .post-date {
  color: var(--color-text-secondary);
  margin-top: 1rem;
}

.post-body {
  font-size: 1.1rem;
  line-height: 1.8;
  color: var(--color-text-primary);
}

.post-body h2,
.post-body h3,
.post-body h4 {
  color: var(--color-primary);
  margin-top: 2.5rem;
  margin-bottom: 1rem;
  line-height: 1.3;
}

.post-body p {
  margin-bottom: 1.5rem;
}

.post-body a {
  text-decoration: underline;
  text-underline-offset: 3px;
}

.post-body ul,
.post-body ol {
  padding-left: 2rem;
  margin-bottom: 1.5rem;
}

.post-body li {
  margin-bottom: 0.5rem;
}

.post-body blockquote {
  border-left: 4px solid var(--color-primary);
  padding-left: 1.5rem;
  margin: 2rem 0;
  font-style: italic;
  color: var(--color-text-secondary);
}

.post-body blockquote p {
  margin-bottom: 0;
}

.post-body hr {
  border: 0;
  border-top: 1px solid var(--color-border);
  margin: 3rem auto;
}

/* --- 15. SINGLE POST - BACK LINK --- */
.back-to-blog-link {
  display: inline-block;
  margin-bottom: 2rem;
  color: var(--color-text-secondary);
  text-decoration: none;
}
.back-to-blog-link:hover {
  color: var(--color-primary);
  text-decoration: underline;
}

/* --- 16. SINGLE POST - CONTENT IMAGES --- */
.post-body img {
  /* La regola più importante: l'immagine non sarà mai più larga del suo contenitore */
  max-width: 100%;
  
  /* Mantiene le proporzioni corrette quando l'immagine viene ridimensionata */
  height: auto;
  
  /* Permette di centrare l'immagine e gestire i margini correttamente */
  display: block;
  margin: 2.5rem auto; /* Aggiunge spazio sopra/sotto e centra l'immagine */
  
  /* Stile coerente con il resto del sito */
  border-radius: 8px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}
